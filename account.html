<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Response — Account</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen font-sans relative">

    <!-- Floating Navbar -->
    <nav class="bg-white shadow-lg flex items-center justify-between px-6 py-3 rounded-lg mx-4 mt-6">
        <div class="flex items-center space-x-3">
            <div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <span class="font-bold text-xl text-gray-800">Emergency Response</span>
        </div>

        <!-- Right side buttons -->
        <div class="flex items-center space-x-4">
            <!-- Account Icon -->
            <a href="account.html"
                class="flex items-center justify-center w-10 h-10 bg-gray-200 hover:bg-gray-300 rounded-full shadow-md transition transform hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path
                        d="M12 12c2.7 0 4.9-2.2 4.9-4.9S14.7 2.2 12 2.2 7.1 4.4 7.1 7.1 9.3 12 12 12zm0 2c-3.3 0-9.9 1.7-9.9 5v2h19.8v-2c0-3.3-6.6-5-9.9-5z" />
                </svg>
            </a>

            <!-- Logout Button -->
            <button id="logoutBtn"
                class="bg-red-500 hover:bg-red-600 text-white py-2 px-5 rounded-full shadow-md transition transform hover:scale-105">Logout</button>
        </div>
    </nav>

    <!-- Account Card -->
    <div class="max-w-lg mx-auto bg-white shadow-2xl rounded-3xl p-8 fade-in mt-10">
        <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">My Account</h1>

        <div id="userDetails" class="space-y-6">
            <!-- Personal details will be loaded here -->
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col md:flex-row justify-between mt-8 gap-4">
            <button id="editBtn"
                class="bg-yellow-400 hover:bg-yellow-500 text-white py-3 px-5 rounded-2xl shadow-md transition transform hover:scale-105 flex-1 font-semibold">Edit
                Details</button>
            <button id="updateLocationBtn"
                class="bg-blue-500 hover:bg-blue-600 text-white py-3 px-5 rounded-2xl shadow-md transition transform hover:scale-105 flex-1 font-semibold">Update
                Location</button>
            <button id="deleteBtn"
                class="bg-red-500 hover:bg-red-600 text-white py-3 px-5 rounded-2xl shadow-md transition transform hover:scale-105 flex-1 font-semibold">Delete
                Account</button>
        </div>

        <p id="message" class="text-center text-sm mt-6 text-gray-500"></p>
    </div>

    <!-- Footer -->
    <footer class="bg-transparent shadow-inner mt-16">
        <div
            class="max-w-6xl mx-auto px-6 py-6 flex flex-col md:flex-row justify-between items-center text-gray-600 text-sm">
            <span>© 2025 Emergency Response. All rights reserved.</span>
            <div class="flex space-x-4 mt-2 md:mt-0">
                <a href="#" class="hover:text-gray-800 transition">Privacy Policy</a>
                <a href="#" class="hover:text-gray-800 transition">Terms of Service</a>
                <a href="#" class="hover:text-gray-800 transition">Contact</a>
            </div>
        </div>
    </footer>


    <!-- Back to Top Button -->
    <button id="backToTop"
        class="fixed bottom-6 right-6 bg-blue-500 hover:bg-blue-600 text-white w-12 h-12 flex items-center justify-center rounded-full shadow-lg transition transform hover:scale-110 z-50">
        ↑
    </button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";
        import { getAuth, signOut, updateEmail, deleteUser, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAo6S_Weu2OYs2ZYWlz6p4G5OVDA9l_ZZM",
            authDomain: "emergency-response-f5347.firebaseapp.com",
            databaseURL: "https://emergency-response-f5347-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "emergency-response-f5347",
            storageBucket: "emergency-response-f5347.firebasestorage.app",
            messagingSenderId: "609774329333",
            appId: "1:609774329333:web:038694be26c79794cc94bc",
            measurementId: "G-VEQ4JG0N16"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const database = getDatabase(app);

        const userDetailsDiv = document.getElementById('userDetails');
        const message = document.getElementById('message');
        const editBtn = document.getElementById('editBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const updateLocationBtn = document.getElementById('updateLocationBtn');
        const backToTopBtn = document.getElementById('backToTop');

        let currentUser = null;
        let userData = {};

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                const snapshot = await get(ref(database, 'users/' + user.uid));
                if (snapshot.exists()) {
                    userData = snapshot.val();
                    displayUserDetails(userData);
                } else {
                    message.textContent = "User data not found!";
                    message.classList.add("text-red-500");
                }
            } else {
                window.location.href = "index.html";
            }
        });

        function displayUserDetails(data) {
            userDetailsDiv.innerHTML = `
        <div>
          <label class="block text-sm text-gray-500 mb-1 font-medium">Full Name</label>
          <input id="nameField" type="text" class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-400 focus:outline-none shadow-sm" value="${data.name}" disabled>
        </div>
        <div>
          <label class="block text-sm text-gray-500 mb-1 font-medium">Email</label>
          <input id="emailField" type="email" class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-400 focus:outline-none shadow-sm" value="${data.email}" disabled>
        </div>
        <div>
          <label class="block text-sm text-gray-500 mb-1 font-medium">Location</label>
          <input id="locationField" type="text" class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-400 focus:outline-none bg-gray-50 shadow-sm" value="${data.location}" disabled>
        </div>
        <div>
          <label class="block text-sm text-gray-500 mb-1 font-medium">Account Created At</label>
          <input type="text" class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-red-400 focus:outline-none bg-gray-50 shadow-sm" value="${data.createdAt}" disabled>
        </div>
      `;
        }

        // Edit, Update Location, Delete, Logout logic remains same as previous code

        // Back to Top
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>

</html>